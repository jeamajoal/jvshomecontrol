services:
  jvshomecontrol:
    build: .
    container_name: jvshomecontrol
    restart: unless-stopped
    ports:
      - "80:80"
    volumes:
      # Persist config, backgrounds, certs, and sounds across container restarts
      - jvs-data:/app/server/data
    environment:
      # ── Required: Hubitat Maker API ──────────────────────────────────────
      - HUBITAT_HOST=${HUBITAT_HOST:-}
      - HUBITAT_APP_ID=${HUBITAT_APP_ID:-}
      - HUBITAT_ACCESS_TOKEN=${HUBITAT_ACCESS_TOKEN:-}

      # ── Recommended ──────────────────────────────────────────────────────
      # - HUBITAT_TLS_INSECURE=1          # Required for self-signed Hubitat certs

      # ── Optional ─────────────────────────────────────────────────────────
      # - PORT=80
      # - HTTP_ONLY=1                     # Disable HTTPS (default: auto-detect certs)
      # - HUBITAT_POLL_INTERVAL_MS=2000   # How often to poll Hubitat
      # - OPEN_METEO_LAT=
      # - OPEN_METEO_LON=
      # - OPEN_METEO_TIMEZONE=auto
      # - EVENTS_INGEST_TOKEN=            # Protect the events endpoint

volumes:
  jvs-data:
